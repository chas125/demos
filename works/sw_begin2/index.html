<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=750, user-scalable=no">
    <title>邀你同行，“旅行者号”AI大巴</title>    
    <!--<link rel="stylesheet" href="css/jquery.mobile-1.4.4.css" />-->
    <!-- <link rel="stylesheet" href="css/animate.min.css" /> -->
    <link rel="stylesheet" href="css/style.css" />   
<!--     <script type="text/javascript" src="js/jquery-1.11.1.js" ></script>
    <script type="text/javascript" src="js/jquery.scrollTo.js" ></script>
    <script type="text/javascript" src="http://baidu.h5.gbpjam.com/js/artDialog.source.js?skin=idialog"></script>
    <script type="text/javascript" src="js/iframeTools.source.js"></script>
    <script type="text/javascript" src="js/Validform_v5.3.2.js" ></script>
    <script type="text/javascript" src="js/jquery.easing.min.js" ></script>    
    <script type="text/javascript" src="js/easeljs.min.js" ></script>
    <script type="text/javascript" src="js/preloadjs.min.js" ></script>
    <script type="text/javascript" src="js/touch.js" ></script>
    <script type="text/javascript" src="js/index.js" ></script> -->
    <style>
        .hide {display: none}
        /*#page_2 {display: block; opacity: 1}*/
        #page_2 > .content {overflow: hidden; position: static; height: auto; transition: .1s linear}
        #page_2 > .content > .bg {position: static;}
    </style>
  </head>
  <body>
    <div class="loading" id="loading">
        <canvas class="loading_canvas" id="loading_canvas"></canvas>
        <div class="progress">
          <div class="progress-bar progress-bar-info progress-bar-striped active" id="progress-bar" style="width: 0;">  
          </div>
       </div>
        <div class="load_gif">
              <div class="load_1"></div>
              <div class="load_2"></div>
              <div class="load_3"></div>
        </div>
    </div>
    <div class="body_box" id="body_box">
      <!-- <div data-role="page" id="page_1" class="hide">
        <div data-role="content" class="content">
            <div class="index_11"></div>
                <div class="index_1"></div>
                <div class="index_2"></div>
                <div class="index_3"></div>
                <div class="index_4"></div>
                <div class="index_5"></div>   
                <div class="index_8">
                  <input type="text" name="u_jqName" class="jqName" data-role="none" />
                </div>
                <div class="index_9" id="hand"></div>
                <div class="index_10" ></div>
                <div class="index_6" id="jq_1"></div>
                <div class="index_7" id="jq_2"></div>
            </div> 
        </div> -->
            <div data-role="page" id="page_2" class="loading">
              <div data-role="content" class="content">
                <img src="img/bg.jpg" border="0" class="bg">
                <img src="img/1.gif" border="0" class="people" id="people">
                <div class="text">
                  <div class="text1"></div>
                  <div class="text2"></div>
                  <div class="text3"></div>
                  <div class="text4"></div>
                  <div class="text5"></div>
                  <div class="text6"></div>
                  <div class="text7"></div>
                  <div class="text8"></div>
                  <div class="text9"></div>
                </div>
                <div class="bj">
                  <div class="p1_1"></div>
                  <div class="p1_2"></div>
                  <div class="p1_3"></div>
                  <div class="p1_4"></div>
                  <div class="p1_5" id="click_1"></div>
                  <div class="p1_6"></div>
                  <div class="p1_7"></div>
                  <div class="p1_8"></div>
                  <div class="p1_9"></div>
                  <div class="p1_10"></div>
                </div>
                <div class="cq" >
                  <div class="p2_1"></div>
                  <div class="p2_2"></div>
                  <div class="p2_3"></div>
                  <div class="p2_4"></div>
                  <div class="p2_5" id="click_2"></div>
                  <div class="p2_6"></div>
                  <div class="p2_7"></div>
                  <div class="p2_8"></div>
                  <div class="p2_9"></div>
                  <div class="p2_10"></div>
                </div>
                <div class="xm">
                  <div class="p3_1" id="click_3"></div>
                  <div class="p3_2"></div>
                  <div class="p3_3"></div>
                  <div class="p3_4"></div>
                  <div class="p3_5" id="cq"></div>
                  <div class="p3_6"></div>
                  <div class="p3_7"></div>
                  <div class="p3_8"></div>
                  <div class="p3_9"></div>
                  <div class="p3_10"></div>
                </div>
                <div class="nj">
                  <div class="p4_1"></div>
                  <div class="p4_3"></div>
                  <div class="p4_2"></div>
                  <div class="p4_4" id="click_4"></div>
                  <div class="p4_5"></div>
                  <div class="p4_6"></div>
                  <div class="p4_7"></div>
                  <div class="p4_8"></div>
                </div>
                <div class="qiao">
                  <div class="q1"></div>
                  <div class="q2"></div>
                  <div class="q3"></div>
                  <div class="q4"></div>
                  <div class="chuan2"></div>
                </div>
                <div class="text">
                  <div class="text1"></div>
                  <div class="text2">
                    <div class="bianji" style="position: absolute; top:60px;left: 25px; font-family: '黑体';font-size: 22px; line-height: 25px; color:#474747; ">AI.<span>xxx</span>终于治好了</div>
                  </div>
                  <div class="text3"></div>
                  <div class="text4">
                    <div class="bianji" style="position: absolute; top:50px;left: 25px; font-family: '黑体'; font-size: 22px; line-height: 25px; color:#474747; ">AI·<span>xxx</span> 从此也能<br>轻松听懂
freestyle</div>
                  </div>
                  <div class="text5"></div>
                  <div class="text6">
                    <div class="bianji"style="position: absolute; top:50px;left: 25px; font-family: '黑体'; font-size: 22px; line-height: 25px; color:#474747; ">AI·<span>xxx</span> 成功解锁了<br>
语言的十八般武艺</div>
                  </div>
                  <div class="text7"></div>
                  <div class="text8">
                    <div class="bianji"style="position: absolute; top:50px;left: 25px; font-family: '黑体'; font-size: 22px; line-height: 25px; color:#474747; ">AI·<span>xxx</span> get暖心技能,可以<br>
                                                                                 精确满足每个人的小确幸</div>
                  </div>
                  <div class="text9"></div>
                </div>
                <div class="hand">
                  <div class="hand1"></div>
                  <div class="hand2"></div>
                  <div class="hand3"></div>
                  <div class="hand4"></div>
                  <div class="hand5"></div>
                  <div class="hand6"></div>
                </div>
                <div class="light">
                  <div class="light_1"></div>
                  <div class="light_2"></div>
                  <div class="light_3"></div>
                  <div class="light_4"></div>
                  <div class="light_5"></div>
                  <div class="light_6"></div>
                  <div class="light_7"></div>
                  <div class="light_8"></div>
                  <div class="light_9"></div>
                  <div class="light_10"></div>
                  <div class="light_11"></div>
                  <div class="light_12"></div>
                  <div class="light_13"></div>
                </div>
                <!-- <div class="tap"></div> -->
                <div id="dd_1"></div>
                <div id="dd_2"></div>
              </div>
             </div>
           <!--  <div data-role="page" id="page_3">
                     <div data-role="content" class="content">
                <div class="login_1"></div>
                <div class="login_2"></div>
                <div class="login_text"></div>
                <form method="post" action="php/save.php" id="form" name="form">
                  <input type="text" name="u_name" class="inputtype" placeholder="姓名" datatype="*" nullmsg="请填写您的姓名！" />
                  <input type="text" name="u_tel" class="inputtype" placeholder="电话" datatype="m" nullmsg="请填写手机号！" errormsg="请正确填写手机号码" />
                  <select name="u_city" id="select" class="inputtype" datatype="*" nullmsg="请填写体验城市！">
                    <option value="">体验城市</option>
                    <option value="北京，8月4日-6日">北京，8月4日-6日</option>
                    <option value="厦门，8月19日-20日">厦门，8月19日-20日</option>
                    <option value="重庆 ，8月25日-27日">重庆 ，8月25日-27日</option>
                    <option value="武汉，9月2日-3日">武汉，9月2日-3日</option>
                    <option value="南京， 9月9日-10日">南京， 9月9日-10日</option>
                  </select>
                  
                  <input type="text" name="u_num" class="inputtype" placeholder="体验人数"   datatype="n" nullmsg="请填写体验人数！"/>
                  <div style="text-align: center;"><input type="submit" value="" id="submit" /></div>
                </form>
                  
              </div>
              </div>
            <div data-role="page" id="page_4">
                <div data-role="content" class="content">
                <img src="img/img3.png" border="0" class="bg">
                  <div class="buttom_1"></div>
                  <div class="buttom_2"></div>
                  <div class="success_text">恭喜您成为第<span>xxxx</span>名<br>
搭乘“旅行者号”AI大巴的乘客</div>
              </div>
              <div id="alert"><img src="img/share.png" border="0"></div>
              </div>
             <div data-role="page" id="page_5">
              <div data-role="content" class="content">
                <img src="img/img2.png" border="0" class="line">
                  <div class="line_1"></div>
                  <div class="line_2"></div>
                  <div class="line_3"></div>
                  <div class="line_4"></div>
                  <div class="line_5"></div>
              </div>
              </div>
          </div> -->
     
<!-- <script type="text/javascript" src="js/loading.js" ></script> -->

<script src="js/jquery-1.11.1.js"></script>
<script>
var baseUrl = 'img/'

var imgs = ['1.gif', '2.gif', 'bg.jpg', 'img4.png'];
var $progress = $('.progress-bar')
preloadImage(imgs, function(percent){
    $progress.width(percent + '%')
}, Start);

function Start() {
    $('#loading').fadeOut();
    $('#page_2').fadeIn().animate({'opacity': 1});
    Shake(one);
    requestAnimationFrame(run);
    window.addEventListener('click', one);
}


var speed = 0
var Timer = null;
function one() {
    clearInterval(Timer);
    speed = Math.min(++speed, 6);
    Timer = setInterval(function(){
        speed = Math.max(0, speed - 2);
    }, 150);
}

var $men = $('#people');
var index = 0;
var x = 0, y = 0;
var GoToRight = true;
var $wrap = $('#page_2 > .content');
var set = 0;
function run() {
    if (y < 180) {
        x += speed * 1.7;
    } else if (y < 430) {
        x -= speed * 1.4;
        GoToRight && $men.prop('src', 'img/2.gif');
        GoToRight = false;
    } else if (y < 650) {
        x += speed * 1.7;
        !GoToRight && $men.prop('src', 'img/1.gif');
        GoToRight = true;
    } else if (y < 950) {
        x -= speed * 1.4;
        GoToRight && $men.prop('src', 'img/2.gif');
        GoToRight = false;
    } else if (y < 1250) {
        x += speed * 1.1;
        !GoToRight && $men.prop('src', 'img/1.gif');
        GoToRight = true;
    } else if (y < 1800) {
        x += 0;
        !GoToRight && $men.prop('src', '');
        GoToRight = true;
    } else if (y < 2100) {
        x -= speed * 1.4;
        GoToRight && $men.prop('src', 'img/2.gif');
        GoToRight = false;
    }
    y += speed;
    if (++set < 4) {

    } else {
        set = 0;
        $wrap.css('transform', 'translateY(' + -1*y + 'px)');
    }
    $men.css('transform', 'translate(' + x + 'px,' + y + 'px)');
    requestAnimationFrame(run);
}
      
function preloadImage(imgArr, fn, callback) {
    var count = 0, len = imgArr.length;
    for(var i=0; i<len; i++) {
        var img = new Image();
        img.onload = function() {
            count++;
            if (fn) fn(count/len*100);
            if (count === len) {
                if (callback) callback();
            }
        };
        img.src = (baseUrl || '') + imgArr[i];
    }
}

function Shake(fn) {
  var lastTime = new Date();
  var lastX = null, lastY = null, lastZ = null;
  var sensitive = 60;
  window.addEventListener('devicemotion', function (res) {
    // var acceleration =eventData.accelerationIncludingGravity;
    // var curTime = new Date().getTime();
    // if ((curTime-last_update)> 10) {
    //     var diffTime = curTime -last_update;
    //     last_update = curTime;
    //     x = acceleration.x;
    //     y = acceleration.y;
    //     z = acceleration.z;
    //     var speed = Math.abs(x +y + z - last_x - last_y - last_z) / diffTime * 10000;
    //     if (speed > SHAKE_THRESHOLD) {
    //         alert("你中奖啦！");  // Do something
    //     }
    //     last_x = x;
    //     last_y = y;
    //     last_z = z;
    // }
    res = res.accelerationIncludingGravity
    var currentTime;
    var timeDifference;
    var deltaX = 0, deltaY = 0, deltaZ = 0;
    if ((lastX === null) && (lastY === null) && (lastZ === null)) {
      lastX = res.x; lastY = res.y; lastZ = res.z; return;
    }
    deltaX = Math.abs(lastX - res.x) * 100;
    deltaY = Math.abs(lastY - res.y) * 100;
    deltaZ = Math.abs(lastZ - res.z) * 100;
    if (((deltaX > sensitive) && (deltaY > sensitive)) ||
      ((deltaX > sensitive) && (deltaZ > sensitive)) ||
      ((deltaY > sensitive) && (deltaZ > sensitive))) {
      currentTime = new Date();
      timeDifference = currentTime.getTime() - lastTime.getTime();

      // if (timeDifference > 500) {
        fn && fn(timeDifference);
        lastTime = new Date();
      // }
    }
    lastX = res.x; lastY = res.y; lastZ = res.z;
  })
}
</script>
</body>
</html>
